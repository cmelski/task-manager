<!DOCTYPE HTML>

<html>
	<head>
		<title>To Do List Manager</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="static/assets/css/main.css" />
		<noscript><link rel="stylesheet" href="static/assets/css/noscript.css" /></noscript>
		<style>
      a:link {
         color: white;
         background-color: transparent;
         text-decoration: none;
      }
      a:visited {
         color: white;
         background-color: transparent;
         text-decoration: none;
      }
      a:active {
         color: white;
         background-color: transparent;
      }
      a:hover {
         color: hotpink;

      }

/* Tooltip container */
.tooltip {
  position: relative;
  display: inline-block;
  border-bottom: 0px dotted black; /* If you want dots under the hoverable text */
}

/* Tooltip text */
.tooltip .tooltiptext {
  visibility: hidden;
  width: 225px;
  background-color: black;
  right: 100%;
  color: #fff;
  text-align: center;
  padding: 0px 0;
  border-radius: 6px;
  font-size: 16px;

  /* Position the tooltip text - see examples below! */
  position: absolute;
  z-index: 1;
}

/* Show the tooltip text when you mouse over the tooltip container */
.tooltip:hover .tooltiptext {
  visibility: visible;
}



   </style>
		<!--{% if token %}
		<script type="module">
(async function autoLoginIfNeeded() {

  try {
    // 1) don't run if token already present or we already auto-logged-in this session
    if (localStorage.getItem("token") || sessionStorage.getItem("autoLoginDone")) {
      return;
    }
      // store token and mark we've auto-logged-in this session
      //const token = "{{ token }}";
      const token = localStorage.getItem("token")
      localStorage.setItem("token", token);
      sessionStorage.setItem("autoLoginDone", "1");

      // avoid redirect loop: only navigate if we're not already on home
      if (window.location.pathname !== "/") {
        window.location.href = "/";
      } else {
        // if already at '/', just reload once to ensure UI picks up token
        window.location.reload();
      }

  } catch (err) {
    console.error("Auto-login error:", err);
  }
})();
</script>

			{% endif %}



<script type="module">
(async function autoLoginIfNeeded() {


  try {
    // 1) don't run if token already present or we already auto-logged-in this session
    if (localStorage.getItem("token") || sessionStorage.getItem("autoLoginDone")) {
      return;
    }

    // 2) credentials for test-only route; keep them safe and only use this in test/dev
    //const payload = { email: "email", password: "password" };

    // 3) POST to your test login endpoint (must accept POST JSON)
    const response = await fetch("/api/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      //body: JSON.stringify(payload)
    });

    // 4) parse JSON safely
    const data = await response.json().catch(() => null);

    if (response.ok && data && data.token) {
      // store token and mark we've auto-logged-in this session
      localStorage.setItem("token", data.token);
      sessionStorage.setItem("autoLoginDone", "1");

      // avoid redirect loop: only navigate if we're not already on home
      if (window.location.pathname !== "/") {
        window.location.href = "/";
      } else {
        // if already at '/', just reload once to ensure UI picks up token
        window.location.reload();
      }
    } else {
      console.warn("Auto login failed:", data);
      // optional: remove any half-set token
      localStorage.removeItem("token");
      sessionStorage.removeItem("autoLoginDone");
    }
  } catch (err) {
    console.error("Auto-login error:", err);
  }
})();
</script>-->






	</head>
	<body class="is-preload">
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">

						<div class="inner">

							<!-- Logo -->
								<a href="" class="logo">
									<span class="title"></span>
									<img src="/static/images/ToDo.jpeg">

								</a>


							<!-- Nav -->
								<nav>
									<ul>
										{% if current_user.is_authenticated: %}
										<div class="tooltip"><span style="font-size: 20px;">ðŸ‘¤</span><span class="tooltiptext">{{current_user.name}}/{{current_user.email}}</span></div>
										<li><a href="#menu">Menu</a></li>

										{% else: %}
											<li><a href="#menu">Menu</a></li>
										{% endif %}
									</ul>
								</nav>

						</div>
					</header>

				<!-- Menu -->
					<nav id="menu">
						<h2>Menu</h2>
						<ul>
							<li style="font-weight: bold"><a href="{{ url_for('home')}}">Home</a></li>
							{% if not current_user.is_authenticated: %}
							<li style="font-weight: bold"><a href="{{ url_for('login') }}">Log In</a></li>
							<li style="font-weight: bold"><a href="{{ url_for('register_user') }}">Register</a></li>
							{% endif %}
							{% if current_user.is_authenticated: %}
							<li style="font-weight: bold"><a href="{{ url_for('logout') }}">Log Out</a></li>
							{% endif %}

						</ul>
					</nav>

				<!-- Main -->
					<div id="main" style="background-image: url('/static/images/checklist.jpeg'); background-size: cover; background-repeat: no-repeat">
						<div class="inner">

							<section class="tiles">

								<article class="style2" style="height:200px; width:325px">
									<span class="image">
										<img src="static/images/pic02.jpg" alt=""/>
									</span>
									<a href="">
										<h2>Active Lists ({{all_lists|length}})</h2>

										<div class="content">

												{% for list in all_lists: %}
											<object><a href="{{ url_for('show_list_details',list_id = list[0]) }}">{{list[2]}}</a> <a href="{{ url_for('delete_list',list_id = list[0])}}">âœ˜</a></object><br>
													{% endfor %}
											<div class="tooltip">
												<object><a href="{{ url_for('add_new_list') }}">âž•</a></object>
													<span class="tooltiptext">Add New List</span>
											</div>

											</div>

									</a>

								</article>


								<article class="style2" style="height:200px; width:325px">
									<span class="image">
										<img src="static/images/pic02.jpg" alt="" />
									</span>
									<a href="">
										<h2>List Reports</h2>
										<div class="content">
											{% if current_user.is_authenticated: %}
											<object><a href="{{ url_for('outstanding_task_report') }}">Outstanding Tasks</a></object><br>
											<object><a href="{{ url_for('get_tasks_by_assignee_report') }}">Tasks by Assignee</a></object><br>
											{% endif %}
										</div>
									</a>
								</article>

							</section>
						</div>
					</div>

				<!-- Footer -->
					<footer id="footer">
						<div class="inner">


							<ul class="copyright">
								<li>&copy; Untitled. All rights reserved</li>
							</ul>
						</div>
					</footer>

			</div>

		<!-- Scripts -->

			<script src="static/assets/js/jquery.min.js"></script>
			<script src="static/assets/js/browser.min.js"></script>
			<script src="static/assets/js/breakpoints.min.js"></script>
			<script src="static/assets/js/util.js"></script>
			<script src="static/assets/js/main.js"></script>

	</body>
</html>